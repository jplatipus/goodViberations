<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>goodViberations Data Layer</title>
    <link rel="stylesheet" href="img/styles.css?v=6">
</head>
<body>
<a href="ReadMe.html"><- ReadMe.html</a>
<h1>goodViberations: Data Layer</h1>
<h2>Introduction</h2>
<p>
This document describes:
</p>
<ul>
    <li>The data structures used by the app</li>
    <li>The storage and retrieval of data from the app</li>
</ul>
<h2>Data structures</h2>
<p>
    The data structures used by the app are based on a list of entries.
</p>
<p>
    Each entry is a master, with a fixed set of fields and a detail that is a list of detail fields.
</p>

<h3>The master has the following fixed set of fields</h3>
<ul>
    <li>name: the name of the entry, the value is unique to each entry, uniqueness is case insensitive.
        That is to say that a the values "a Name", "A Name", "a name" or "A NAME" are all considered to be
        the same name when checking for uniqueness.
        The name may not be an empty string, it must contain at least one character.</li>
    <li>notes: a multiline text entry, the value is not unique to each entry, it may be an empty string.</li>
    <li>creation date and time: a date time. The initial value is the current date and time.</li>
    <li>last modified date and time: a date time. The initial value is the current date and time.</li>
    <li>password: a password entry, the value is not unique to each entry</li>
</ul>
<p>
    The master also has a list of fields, the detail fields, as described below.
</p>
<h3>Detail fields</h3>
<p>
    Detail field instances relate to a specific master entry instance.
    Detail fields can be considered to be a set of text fields, each field has a name and a value.
    The name must be unique to the master entry instance.
</p>
<p>
    Some field values reflect a data type,
    and so have a syntax associated with them. For example, email must be a valid email address syntax,
    url must be a valid http url syntax.
</p>
<h2>Data storage and retrieval</h2>
<p>
    The list of entries are stored as xml.<br/>
    A class called <strong>DataLayer</strong> in the package com.j3t.dataentryapp.datalayer has the methods all other
    classes in the app use.
</p>
<p>
    The following methods are present in the DataLayer class:
    <table class="tblClassCode">

    <tr>
        <th>Method</th><th>parameters</th><th>Description</th>
    </tr>
    <tr>
        <td>createStore</td>
        <td>data: EntryList</td>
        <td>
            <ol>
                <li>
                    checks how many files exist in the context.filesDir, if there are 5 or more files,
                    the oldest file is deleted.
                </li>
                <li>
                    a new file whose name is made of "info" + ddmmyyyyhhmmss.xml is created in the
                    context.filesDir.
                </li>
                <li>
                    The data is written to the file as xml
                </li>
            </ol>
        </td>
    </tr>
    <tr>
        <td>deleteStore</td>
        <td>Deletes all the files in the context.filesDir.</td>
    </tr>
    <tr>
        <td>storeExists</td>
        <td>Boolean method returns true if a store exists, false otherwise.</td>
    </tr>
</td>
</table>
</p>
</body>